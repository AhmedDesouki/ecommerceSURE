<div class="checkout-container">  
  <h1>Checkout</h1>  
    
  <div class="checkout-content">  
    <!-- Order Summary -->  
    <div class="order-summary">  
      <mat-card>  
        <mat-card-header>  
          <mat-card-title>Order Summary</mat-card-title>  
        </mat-card-header>  
        <mat-card-content>  
          @for (item of cartItems; track item.id) {  
            <div class="order-item">  
              <img [src]="item.imageUrl" [alt]="item.productName" class="item-image">  
              <div class="item-details">  
                <h4>{{ item.productName }}</h4>  
                <p>Quantity: {{ item.quantity }}</p>  
                <p class="item-price">${{ (item.price * item.quantity) | number:'1.2-2' }}</p>  
              </div>  
            </div>  
          }  
          <div class="total-section">  
            <h3>Total: ${{ cartTotal | number:'1.2-2' }}</h3>  
          </div>  
        </mat-card-content>  
      </mat-card>  
    </div>  
  
    <!-- Shipping Form -->  
    <div class="shipping-form">  
      <mat-card>  
        <mat-card-header>  
          <mat-card-title>Shipping Information</mat-card-title>  
        </mat-card-header>  
        <mat-card-content>  
          <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()">  
            <mat-form-field appearance="outline" class="full-width">  
              <mat-label>Shipping Address</mat-label>  
              <textarea matInput formControlName="shippingAddress" rows="3" placeholder="Enter your full address"></textarea>  
              @if (checkoutForm.get('shippingAddress')?.hasError('required')) {  
                <mat-error>Shipping address is required</mat-error>  
              }  
              @if (checkoutForm.get('shippingAddress')?.hasError('minlength')) {  
                <mat-error>Address must be at least 10 characters</mat-error>  
              }  
            </mat-form-field>  
  
            <div class="form-row">  
              <mat-form-field appearance="outline">  
                <mat-label>City</mat-label>  
                <input matInput formControlName="shippingCity" placeholder="City">  
                @if (checkoutForm.get('shippingCity')?.hasError('required')) {  
                  <mat-error>City is required</mat-error>  
                }  
              </mat-form-field>  
  
              <mat-form-field appearance="outline">  
                <mat-label>Postal Code</mat-label>  
                <input matInput formControlName="shippingPostalCode" placeholder="Postal Code">  
                @if (checkoutForm.get('shippingPostalCode')?.hasError('required')) {  
                  <mat-error>Postal code is required</mat-error>  
                }  
              </mat-form-field>  
            </div>  
  
            <mat-form-field appearance="outline" class="full-width">  
              <mat-label>Country</mat-label>  
              <input matInput formControlName="shippingCountry" placeholder="Country">  
              @if (checkoutForm.get('shippingCountry')?.hasError('required')) {  
                <mat-error>Country is required</mat-error>  
              }  
            </mat-form-field>  
  
            <mat-form-field appearance="outline" class="full-width">  
              <mat-label>Phone Number</mat-label>  
              <input matInput formControlName="phoneNumber" placeholder="+1 (555) 123-4567">  
              @if (checkoutForm.get('phoneNumber')?.hasError('required')) {  
                <mat-error>Phone number is required</mat-error>  
              }  
              @if (checkoutForm.get('phoneNumber')?.hasError('pattern')) {  
                <mat-error>Please enter a valid phone number</mat-error>  
              }  
            </mat-form-field>  
  
            <mat-form-field appearance="outline" class="full-width">  
              <mat-label>Order Notes (Optional)</mat-label>  
              <textarea matInput formControlName="notes" rows="2" placeholder="Any special instructions..."></textarea>  
            </mat-form-field>  
  
            <div class="form-actions">  
              <button mat-button type="button" (click)="goBackToCart()" [disabled]="isSubmitting">  
                Back to Cart  
              </button>  
              <button mat-raised-button color="primary" type="submit"   
                      [disabled]="checkoutForm.invalid || isSubmitting || cartItems.length === 0">  
                @if (isSubmitting) {  
                  <mat-spinner diameter="20"></mat-spinner>  
                  Processing...  
                } @else {  
                  Place Order  
                }  
              </button>  
            </div>  
          </form>  
        </mat-card-content>  
      </mat-card>  
    </div>  
  </div>  
</div>